{% extends 'base.html' %}

{% block title %}Alimentar Vacas{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto">
    <h1 class="text-2xl font-semibold text-gray-800 mb-4">Alimentar Vacas</h1>

    {% if message %}
    <div class="bg-blue-100 border border-blue-500 text-blue-700 px-4 py-3 rounded relative mb-4">
        {{ message }}
    </div>
    {% endif %}

    <div class="overflow-x-auto">
        <table class="min-w-full bg-white border border-gray-200 shadow-md rounded-lg overflow-hidden">
            <thead class="bg-blue-600 text-white">
                <tr>
                    <th class="py-2 px-4 text-left">Nombre</th>
                    <th class="py-2 px-4 text-left">Raza</th>
                    <th class="py-2 px-4 text-left">Edad</th>
                    <th class="py-2 px-4 text-left">Estado de Gestación</th>
                    <th class="py-2 px-4 text-left">Consumo de Comida (kg)</th>
                    <th class="py-2 px-4 text-left">Consumo de Agua (litros)</th>
                    <th class="py-2 px-4 text-left">Acción</th>
                </tr>
            </thead>
            <tbody>
                {% for animal in animals %}
                <tr class="border-t hover:bg-gray-100">
                    <td class="py-2 px-4 font-semibold">{{ animal.name }}</td>
                    <td class="py-2 px-4">{{ animal.breed }}</td>
                    <td class="py-2 px-4">{{ animal.calculate_age }}</td>
                    <td class="py-2 px-4">
                        {% if animal.pregnancy_status %}
                        <span class="bg-yellow-100 text-yellow-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded">Sí</span>
                        {% else %}
                        <span class="bg-gray-100 text-gray-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded">No</span>
                        {% endif %}
                    </td>
                    <td class="py-2 px-4">{{ animal.calculate_food_consumption|floatformat:2 }}</td>
                    <td class="py-2 px-4">{{ animal.calculate_water_consumption|floatformat:2 }}</td>
                    <td class="py-2 px-4">
                        {% if feed.status == "PENDING" %}
                        <form method="post" action="{% url 'animals:feed_animal' feed.id %}">
                            {% csrf_token %}
                            <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-full hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 transition">
                                Alimentar
                            </button>
                        </form>
                        {% else %}
                        <span class="bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded">
                            Completado
                        </span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
